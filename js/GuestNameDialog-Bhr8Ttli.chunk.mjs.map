{"version":3,"file":"GuestNameDialog-Bhr8Ttli.chunk.mjs","sources":["../src/components/Editor/GuestNameDialog.vue"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<form\n\t\t:title=\"t('text', 'Enter your name so other people can see who is editing')\"\n\t\tclass=\"guest-name-dialog\"\n\t\t@submit.prevent=\"setGuestName()\">\n\t\t<label><AvatarWrapper :session=\"session\" :size=\"32\" /></label>\n\t\t<input\n\t\t\tv-model=\"guestName\"\n\t\t\ttype=\"text\"\n\t\t\t:aria-label=\"t('text', 'Edit guest name')\"\n\t\t\t:placeholder=\"t('text', 'Guest')\" />\n\t\t<input\n\t\t\ttype=\"submit\"\n\t\t\tclass=\"icon-confirm\"\n\t\t\t:aria-label=\"t('text', 'Save guest name')\"\n\t\t\tvalue=\"\" />\n\t</form>\n</template>\n\n<script>\nimport { t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport { useSyncService } from '../../composables/useSyncService.ts'\nimport AvatarWrapper from './AvatarWrapper.vue'\n\nexport default {\n\tname: 'GuestNameDialog',\n\tcomponents: {\n\t\tAvatarWrapper,\n\t},\n\tprops: {\n\t\tsession: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst { syncService } = useSyncService()\n\t\treturn { syncService }\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tguestName: '',\n\t\t\tguestNameBuffered: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tavatarUrl() {\n\t\t\tconst size = 32\n\t\t\tconst avatarUrl = generateUrl('/avatar/guest/{user}/{size}', {\n\t\t\t\tuser: this.guestNameBuffered,\n\t\t\t\tsize,\n\t\t\t})\n\t\t\treturn window.location.protocol + '//' + window.location.host + avatarUrl\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tthis.guestName = this.syncService.guestName\n\t\tthis.updateBufferedGuestName()\n\t},\n\tmethods: {\n\t\tsetGuestName() {\n\t\t\tconst previousGuestName = this.syncService.guestName\n\t\t\tthis.syncService\n\t\t\t\t.updateSession(this.guestName)\n\t\t\t\t.then(() => {\n\t\t\t\t\tlocalStorage.setItem('nick', this.guestName)\n\t\t\t\t\tthis.updateBufferedGuestName()\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tthis.guestName = previousGuestName\n\t\t\t\t})\n\t\t},\n\t\tupdateBufferedGuestName() {\n\t\t\tthis.guestNameBuffered = this.guestName\n\t\t},\n\t\tt,\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\nform.guest-name-dialog {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 6px;\n\n\t&:deep(img) {\n\t\tmargin: 0 !important;\n\t}\n\n\tinput[type='text'] {\n\t\tflex-grow: 1;\n\t}\n\tlabel {\n\t\tpadding-right: 3px;\n\t\theight: 32px;\n\t}\n}\n</style>\n"],"names":["_sfc_main","AvatarWrapper","syncService","useSyncService","avatarUrl","generateUrl","previousGuestName","e","t"],"mappings":"snBA8BA,MAAAA,EAAA,CACA,KAAA,kBACA,WAAA,CACA,cAAAC,CACA,EACA,MAAA,CACA,QAAA,CACA,KAAA,OACA,SAAA,EACA,CACA,EACA,OAAA,CACA,KAAA,CAAA,YAAAC,CAAA,EAAAC,EAAA,EACA,MAAA,CAAA,YAAAD,CAAA,CACA,EACA,MAAA,CACA,MAAA,CACA,UAAA,GACA,kBAAA,EACA,CACA,EACA,SAAA,CACA,WAAA,CAEA,MAAAE,EAAAC,EAAA,8BAAA,CACA,KAAA,KAAA,kBACA,KACA,EAAA,CAAA,EACA,OAAA,OAAA,SAAA,SAAA,KAAA,OAAA,SAAA,KAAAD,CACA,CACA,EACA,aAAA,CACA,KAAA,UAAA,KAAA,YAAA,UACA,KAAA,wBAAA,CACA,EACA,QAAA,CACA,cAAA,CACA,MAAAE,EAAA,KAAA,YAAA,UACA,KAAA,YACA,cAAA,KAAA,SAAA,EACA,KAAA,IAAA,CACA,aAAA,QAAA,OAAA,KAAA,SAAA,EACA,KAAA,wBAAA,CACA,CAAA,EACA,MAAAC,GAAA,CACA,KAAA,UAAAD,CACA,CAAA,CACA,EACA,yBAAA,CACA,KAAA,kBAAA,KAAA,SACA,EACA,EAAAE,CACA,CACA"}