const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/MarkdownContentEditor-BsQpcj-i.chunk.mjs'),window.OC.filePath('text', '', 'js/EditorOutline-BRuiZ4xv.chunk.mjs'),window.OC.filePath('text', '', 'js/NcLoadingIcon-BMkwJYMy.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-DwlFXcXb.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-D8hs3Cuv.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CBjMXwUt.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CCUE3e_p.chunk.mjs'),window.OC.filePath('text', '', 'css/NcLoadingIcon-Bs0OvbBQ.chunk.css'),window.OC.filePath('text', '', 'js/NcNoteCard-C6xb7vi0-Ccg9J-_X.chunk.mjs'),window.OC.filePath('text', '', 'css/NcNoteCard-C6xb7vi0-wlRKa3ok.chunk.css'),window.OC.filePath('text', '', 'js/NcCheckboxRadioSwitch-BIEYfWtF-DVjIXTQG.chunk.mjs'),window.OC.filePath('text', '', 'css/NcCheckboxRadioSwitch-BIEYfWtF-CKL5tLCP.chunk.css'),window.OC.filePath('text', '', 'js/_plugin-vue2_normalizer-XSZyZ-Zg.chunk.mjs'),window.OC.filePath('text', '', 'js/MediaHandler.provider-BkVIW0cW.chunk.mjs'),window.OC.filePath('text', '', 'js/index-B8nYQ_zQ.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-C5ZHccIX.chunk.mjs'),window.OC.filePath('text', '', 'css/EditorOutline-pewHHjba.chunk.css'),window.OC.filePath('text', '', 'js/MenuBar-Buc2TZkA.chunk.mjs'),window.OC.filePath('text', '', 'css/MenuBar-GbXUu82h.chunk.css'),window.OC.filePath('text', '', 'css/MarkdownContentEditor-BY9xkVfb.chunk.css'),window.OC.filePath('text', '', 'js/Editor-Br5EKM0D.chunk.mjs'),window.OC.filePath('text', '', 'js/index-C7Nug59f.chunk.mjs'),window.OC.filePath('text', '', 'js/dav-CQDyL7M_-Ca-87llF.chunk.mjs'),window.OC.filePath('text', '', 'css/Editor-YnuX7weQ.chunk.css')])))=>i.map(i=>d[i]);
import{_ as p,s as S}from"./index-CBjMXwUt.chunk.mjs";import{V as m}from"./vue.runtime.esm-D8hs3Cuv.chunk.mjs";import{o as A,A as I,O as P,H as L,a as k,E,b as M}from"./MediaHandler.provider-BkVIW0cW.chunk.mjs";import"./emoji-picker-DwlFXcXb.chunk.mjs";import"./index-B8nYQ_zQ.chunk.mjs";import"./index-CCUE3e_p.chunk.mjs";import"./logger-C5ZHccIX.chunk.mjs";const j="1.2";window.OCA.Text={...window.OCA.Text};class B{#t;#o;constructor(t,e){return this.#t=t,this.#o=e,this.#n(),this}#e(){return this.#t.$children[0]}onCreate(t=()=>{}){return this.#t.$on("create:content",e=>{t(e)}),this}onLoaded(t=()=>{}){return this.#t.$on("ready",()=>{t()}),this}onUpdate(t=()=>{}){return this.#t.$on("update:content",e=>{t(e)}),this}onOutlineToggle(t=()=>{}){return this.#t.$on("outline-toggled",e=>{t(e)}),this}onSearch(t=()=>{}){return S("text:editor:search-results",t),this}render(t){t.innerHTML="";const e=document.createElement("div");return t.appendChild(e),this.#t.$mount(e),this}destroy(){this.#t.$destroy(),this.#t.$el.innerHTML=""}setContent(t){return this.#t.$set(this.#o,"content",t),this.#e()?.setContent?.(t),this}setSearchQuery(t,e){this.#e()?.editor?.commands.setSearchQuery(t,e)}searchNext(){this.#e()?.editor?.commands.nextMatch()}searchPrevious(){this.#e()?.editor?.commands.previousMatch()}async save(){return this.#e().save?.()}setShowOutline(t){return this.#t.$set(this.#o,"showOutlineOutside",t),this}setReadOnly(t){return this.#t.$set(this.#o,"readOnly",t),this}updateReadonlyBarProps(t){return this.#t.$set(this.#o,"readonlyBarProps",t),this}insertAtCursor(t){this.#e().editor?.chain().insertContent(t).focus().run()}focus(){this.#e().editor?.commands.focus()}debugYjs(){const t=this.#e().debugYjsData();console.warn(JSON.stringify(t,null," ")),console.warn(`%c%s
%c%s
%s`,"font-weight: bold;",'Editor Yjs debug data. Copy the object below that starts with "clientId".',"font-weight: normal; font-style: italic;",'- In Chrome, select "Copy" at the end of the line.','- In Firefox, right-click on the object and select "Copy object".')}#n(){window?._oc_debug&&(this.vm=this.#t,window.OCA.Text._debug=[...window.OCA.Text._debug??[],this])}}window.OCA.Text.apiVersion=j,window.OCA.Text.createEditor=async function({el:h,fileId:t=void 0,useSession:e=!0,filePath:i=void 0,shareToken:a=null,content:l="",readOnly:c=!1,autofocus:w=!0,readonlyBar:d={component:null,props:null},onCreate:O=({markdown:r})=>{},onLoaded:y=()=>{},onUpdate:f=({markdown:r})=>{},onOutlineToggle:v=r=>{},onFileInsert:g=void 0,onMentionSearch:C=void 0,onMentionInsert:T=void 0,openLinkHandler:_=void 0,onSearch:b=void 0}){const{default:r}=await p(async()=>{const{default:o}=await import("./MarkdownContentEditor-BsQpcj-i.chunk.mjs");return{default:o}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url),{default:x}=await p(async()=>{const{default:o}=await import("./Editor-Br5EKM0D.chunk.mjs");return{default:o}},__vite__mapDeps([20,5,3,21,2,4,6,7,22,8,9,14,1,10,11,12,13,15,16,17,18,23]),import.meta.url),n=m.observable({showOutlineOutside:!1,readonlyBarProps:d.props,readOnly:c,content:l}),s=t&&e,$=new m({provide(){return{[M]:g,[E]:!!s,[k]:s?!0:C,[L]:s?!0:T,[P]:{openLink:_||A},[I]:{resolve(o,u){return[{type:"image",url:o}]}}}},data(){return n},render:o=>{const u=d?.component?{readonlyBar:()=>o(d.component,{props:n.readonlyBarProps})}:{};return s?o(x,{props:{fileId:t,relativePath:i,shareToken:a,mime:"text/markdown",active:!0,autofocus:w,showOutlineOutside:n.showOutlineOutside},scopedSlots:u}):o(r,{props:{fileId:t,content:n.content,relativePath:i,shareToken:a,readOnly:n.readOnly,showOutlineOutside:n.showOutlineOutside},scopedSlots:u})}});return new B($,n).onCreate(O).onLoaded(y).onUpdate(f).onOutlineToggle(v).onSearch(b).render(h)};
//# sourceMappingURL=text-editor.mjs.map
